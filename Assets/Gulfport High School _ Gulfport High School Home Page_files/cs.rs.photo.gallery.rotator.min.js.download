// RESPONSIVE PHOTO GALLERY ROTATOR | INCLUDES CUSTOM JQUERY MOBILE SCRIPT FOR SWIPE EVENTS
// AUTHOR BRENTON KELLY - CREATIVE DEVELOPMENT MANAGER - BLACKBOARD, INC.
// VERSION 04.17.19	

!function($){$.fn.creativeGalleryRotate=function(settings){var config={efficientLoad:"yes",imageWidth:960,imageHeight:405,appHeader:"no",titles:"no",captions:"no",playPause:"no",mainControls:"no",galleryOverlay:"no",linkedElement:["image"],contMoreLink:"no",contMoreLinkText:"Read More",descMoreLink:"no",descMoreLinkText:"Read More",bullets:"no",bulletControls:"no",thumbnails:"no",thumbnailWidth:122,thumbnailHeight:52,thumbnailSlideDirection:"horizontal",hoverPause:"yes",fullScreenRotator:"no",fullScreenBreakpoints:["960","768","640","480","320"],autoRotate:"yes",transitionType:"fade",transitionSpeed:2,customResize:"no",customResizeFunction:function(e){},onImageLoad:function(){},allImagesLoaded:function(){},onThumbnailLoad:function(){},allThumbnailsLoaded:function(){},onTransitionStart:function(){},onTransitionEnd:function(){},allLoaded:function(){}};return settings&&$.extend(config,settings),this.each(function(){var element=this,moduleID=$(element).parent().parent().attr("id").replace("pmi-",""),myJSON=eval("photoGallery"+moduleID),recordNum=myJSON.Album.Images.length,elemID=moduleID,csKeyCodes={tab:9,enter:13,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40};$(window).bind("resize",windowResize),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,l=Number(arguments[1])||0;for((l=l<0?Math.ceil(l):Math.floor(l))<0&&(l+=t);l<t;l++)if(l in this&&this[l]===e)return l;return-1});var getWidth=$(window).width();function gatherMedia(){var e="";if("fade"==config.transitionType)for(var t=0;t<recordNum;t++){var l=0==t?" first active":"";if(1<recordNum)var a=1==t?" next":"",i="yes"==config.efficientLoad&&2==t?" next-load":"",o=t==recordNum-1?" last prev":"";else a="",o="",i="";var s=myJSON.Album.Images[t].src.split("?"),r=myJSON.Album.lgpath+s[0];e+='<li class="image loading hidden'+l+a+o+i+'" aria-hidden="'+(-1<l.indexOf("active")?"false":"true")+'">',e+='<span class="record-src hidden">'+r+"</span>",e+='<span class="record-title hidden">'+myJSON.Album.Images[t].photoname+"</span>",e+='<span class="record-link hidden">'+myJSON.Album.Images[t].link+"</span>",e+='<span class="record-link-target hidden">'+myJSON.Album.Images[t].target+"</span>",e+='<div class="loader">Loading</div>',e+="</li>"}else if("slide"==config.transitionType)if(1==recordNum){var n=myJSON.Album.Images[0].src.split("?"),m=myJSON.Album.lgpath+n[0];for(t=0;t<3;t++){e+='<li class="'+(h=1==t?"image loading active":"image loading")+'" aria-hidden="'+(-1<h.indexOf("active")?"false":"true")+'">',e+='<span class="record-src hidden">'+m+"</span>",e+='<span class="record-title hidden">'+myJSON.Album.Images[0].photoname+"</span>",e+='<span class="record-link hidden">'+myJSON.Album.Images[0].link+"</span>",e+='<span class="record-link-target hidden">'+myJSON.Album.Images[0].target+"</span>",e+='<div class="loader">Loading</div>',e+="</li>"}}else if(2==recordNum){t=0;for(var g=1;t<4;t++){var h=0==t?"image loading prev":1==t?"image loading active":2==t?"image loading next":"yes"==config.efficientLoad&&3==t?"image loading next-load":"image loading";s=myJSON.Album.Images[g].src.split("?"),r=myJSON.Album.lgpath+s[0];e+='<li class="'+h+'" index="'+g+'" aria-hidden="'+(-1<h.indexOf("active")?"false":"true")+'">',e+='<span class="record-src hidden">'+r+"</span>",e+='<span class="record-title hidden">'+myJSON.Album.Images[g].photoname+"</span>",e+='<span class="record-link hidden">'+myJSON.Album.Images[g].link+"</span>",e+='<span class="record-link-target hidden">'+myJSON.Album.Images[g].target+"</span>",e+="</li>",1==g?g=0:g++}}else if(3==recordNum)for(t=0,g=2;t<6;t++){h=0==t?"image loading prev":1==t?"image loading active":2==t?"image loading next":"yes"==config.efficientLoad&&3==t?"image loading next-load":"image loading",s=myJSON.Album.Images[g].src.split("?"),r=myJSON.Album.lgpath+s[0];e+='<li class="'+h+'" index="'+g+'" aria-hidden="'+(-1<h.indexOf("active")?"false":"true")+'">',e+='<span class="record-src hidden">'+r+"</span>",e+='<span class="record-title hidden">'+myJSON.Album.Images[g].photoname+"</span>",e+='<span class="record-link hidden">'+myJSON.Album.Images[g].link+"</span>",e+='<span class="record-link-target hidden">'+myJSON.Album.Images[g].target+"</span>",e+="</li>",2==g?g=0:g++}else for(t=0,g=recordNum-1;t<recordNum;t++){h=0==t?"image loading prev":1==t?"image loading active":2==t?"image loading next":"yes"==config.efficientLoad&&3==t?"image loading next-load":"image loading",s=myJSON.Album.Images[g].src.split("?"),r=myJSON.Album.lgpath+s[0];e+='<li class="'+h+'" index="'+g+'" aria-hidden="'+(-1<h.indexOf("active")?"false":"true")+'">',e+='<span class="record-src hidden">'+r+"</span>",e+='<span class="record-title hidden">'+myJSON.Album.Images[g].photoname+"</span>",e+='<span class="record-link hidden">'+myJSON.Album.Images[g].link+"</span>",e+='<span class="record-link-target hidden">'+myJSON.Album.Images[g].target+"</span>",e+="</li>",g==recordNum-1?g=0:g++}buildStructure(e)}function buildStructure(e){var t="";if(t='<div class="ui-widget-detail">',t+='   <div class="rs-photo-gallery-container" id="rs-photo-gallery-container-'+elemID+'">',t+='   <div class="rs-photo-gallery-images">',t+='       <ul class="rs-photo-gallery-images-list">'+e+"</ul>",t+="   </div>","yes"==config.thumbnails&&1<recordNum){for(var l="",a=0;a<recordNum;a++){var i=0==a?" first active":"";if(1<recordNum)var o=1==a?" next":"",s=a==recordNum-1?" last prev":"";else o="",s="";var r=myJSON.Album.Images[a].src.split("?");l+='<li class="rs-photo-gallery-thumbnail thumbnail-image loading hidden'+i+o+s+'" role="button" tabindex="0" aria-label="Navigate to Slide '+(a+1)+'">',l+='<span class="thumbnail-src hidden">'+(myJSON.Album.lgpath+r[0])+"</span>",l+='<span class="thumbnail-title hidden">'+myJSON.Album.Images[a].photoname+"</span>",l+="</li>"}t+='<div class="rs-photo-gallery-thumbnails-outer">',t+='<div class="rs-photo-gallery-thumb-control back hidden" role="button" tabindex="0" aria-label="Scroll Thumbnails Backward"></div>',t+='<div class="rs-photo-gallery-thumbnails">',t+='<ul class="rs-photo-gallery-thumbnail-list">'+l+"</ul>",t+="</div>",t+='<div class="rs-photo-gallery-thumb-control next hidden" role="button" tabindex="0" aria-label="Scroll Thumbnails Forward"></div>',t+="</div>"}if("yes"==config.bullets&&1<recordNum){t+='<div class="rs-photo-gallery-bullets-outer">',t+='\t<div class="rs-photo-gallery-bullets ui-clear">',"yes"==config.bulletControls&&(t+='<div class="rs-photo-gallery-bullet-control back" role="button" tabindex="0" aria-label="Navigate to Previous Slide"></div>');for(var n=1;n<=recordNum;n++)t+=1==n?'<div class="rs-photo-gallery-bullet active first" role="button" tabindex="0" aria-label="Navigate to Slide '+n+'"></div>':2==n&&n==recordNum?'<div class="rs-photo-gallery-bullet next prev last" role="button" tabindex="0" aria-label="Navigate to Slide '+n+'"></div>':2==n?'<div class="rs-photo-gallery-bullet next" role="button" tabindex="0" aria-label="Navigate to Slide '+n+'"></div>':n==recordNum?'<div class="rs-photo-gallery-bullet prev last" role="button" tabindex="0" aria-label="Navigate to Slide '+n+'"></div>':'<div class="rs-photo-gallery-bullet" role="button" tabindex="0" aria-label="Navigate to Slide '+n+'"></div>';"yes"==config.bulletControls&&(t+='<div class="rs-photo-gallery-bullet-control next" role="button" tabindex="0" aria-label="Navigate to Next Slide"></div>'),t+="</div>",t+="</div>"}"yes"!=config.titles&&"yes"!=config.captions&&"yes"!=config.descMoreLink||("yes"==config.titles&&"no"==config.captions?"hide"==jQuery.trim(myJSON.Album.Images[0].photoname).toLowerCase()?"yes"==config.descMoreLink?""==jQuery.trim(myJSON.Album.Images[0].link)?t+='<div class="rs-photo-gallery-desc hidden">':t+='<div class="rs-photo-gallery-desc">':t+='<div class="rs-photo-gallery-desc hidden">':t+='<div class="rs-photo-gallery-desc">':"no"==config.titles&&"yes"==config.captions?"hide"==jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase()?"yes"==config.descMoreLink?""==jQuery.trim(myJSON.Album.Images[0].link)?t+='<div class="rs-photo-gallery-desc hidden">':t+='<div class="rs-photo-gallery-desc">':t+='<div class="rs-photo-gallery-desc hidden">':t+='<div class="rs-photo-gallery-desc">':"yes"==config.titles&&"yes"==config.captions&&("hide"==jQuery.trim(myJSON.Album.Images[0].photoname).toLowerCase()&&"hide"==jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase()||"hide"==jQuery.trim(myJSON.Album.Images[0].photoname).toLowerCase()&&""==jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase()?"yes"==config.descMoreLink?""==jQuery.trim(myJSON.Album.Images[0].link)?t+='<div class="rs-photo-gallery-desc hidden">':t+='<div class="rs-photo-gallery-desc">':t+='<div class="rs-photo-gallery-desc hidden">':t+='<div class="rs-photo-gallery-desc">'),"yes"==config.titles&&(t+='<div class="rs-photo-gallery-title">',"hide"==jQuery.trim(myJSON.Album.Images[0].photoname).toLowerCase()?t+='   <div class="rs-photo-title active hidden"></div>':(t+='   <div class="rs-photo-title active">',""!=jQuery.trim(myJSON.Album.Images[0].link)&&(-1<$.inArray("title",config.linkedElement)||-1<$.inArray("all",config.linkedElement))?t+='<h1><a href="'+jQuery.trim(myJSON.Album.Images[0].link)+'" target="'+myJSON.Album.Images[0].target+'">'+jQuery.trim(myJSON.Album.Images[0].photoname)+"</a></h1>":t+="<h1>"+jQuery.trim(myJSON.Album.Images[0].photoname)+"</h1>",t+="</div>"),1<recordNum&&("hide"==jQuery.trim(myJSON.Album.Images[1].photoname).toLowerCase()?t+='   <div class="rs-photo-title next hidden"></div>':(t+='   <div class="rs-photo-title next">',""!=jQuery.trim(myJSON.Album.Images[1].link)&&(-1<$.inArray("title",config.linkedElement)||-1<$.inArray("all",config.linkedElement))?t+='<h1><a href="'+jQuery.trim(myJSON.Album.Images[1].link)+'" target="'+myJSON.Album.Images[1].target+'">'+jQuery.trim(myJSON.Album.Images[1].photoname)+"</a></h1>":t+="<h1>"+jQuery.trim(myJSON.Album.Images[1].photoname)+"</h1>",t+="   </div>")),t+="</div>"),"yes"==config.captions&&(t+='<div class="rs-photo-gallery-caption">',"hide"==jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase()?t+='   <div class="rs-photo-caption active hidden"></div>':(t+='   <div class="rs-photo-caption active">',t+="       <p>"+jQuery.trim(myJSON.Album.Images[0].caption)+"</p>",t+="   </div>"),1<recordNum&&("hide"==jQuery.trim(myJSON.Album.Images[1].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[1].caption).toLowerCase()?t+='   <div class="rs-photo-caption next hidden"></div>':(t+='   <div class="rs-photo-caption next">',t+="       <p>"+jQuery.trim(myJSON.Album.Images[1].caption)+"</p>",t+="   </div>")),t+="</div>")),"yes"!=config.titles&&"yes"!=config.captions||("yes"==config.descMoreLink&&(""!=jQuery.trim(myJSON.Album.Images[0].link)?t+='<div class="rs-photo-gallery-desc-more-link"><a href="'+myJSON.Album.Images[0].link+'" target="'+myJSON.Album.Images[0].target+'" aria-label="Read more about gallery slide 1: '+jQuery.trim(myJSON.Album.Images[0].photoname).replace(/&#39;/gi,"'").replace(/&quot;/gi,'"')+'"><span>'+config.descMoreLinkText+"</span></a></div>":t+='<div class="rs-photo-gallery-desc-more-link hidden" style="display: none;"><a href="'+myJSON.Album.Images[0].link+'" target="'+myJSON.Album.Images[0].target+'" aria-label="Read more about gallery slide 1: '+jQuery.trim(myJSON.Album.Images[0].photoname).replace(/&#39;/gi,"'").replace(/&quot;/gi,'"')+'"><span>'+config.descMoreLinkText+"</span></a></div>"),t+="</div>"),1<recordNum&&("yes"==config.mainControls&&(t+='<div class="rs-photo-gallery-control back" role="button" tabindex="0" aria-label="Navigate to Slide '+recordNum+" of "+recordNum+'"></div>',t+='<div class="rs-photo-gallery-control next" role="button" tabindex="0" aria-label="Navigate to Slide 2 of '+recordNum+'"></div>'),"yes"==config.playPause&&(t+='<div class="rs-photo-gallery-control play-pause playing" role="button" tabindex="0" aria-label="Pause Gallery - Currently on Slide 1 of '+recordNum+'"></div>')),"yes"==config.contMoreLink&&(""!=jQuery.trim(myJSON.Album.Images[0].link)?t+='<div class="rs-photo-gallery-more-link"><a href="'+myJSON.Album.Images[0].link+'" target="'+myJSON.Album.Images[0].target+'" aria-label="Read more about gallery slide 1: '+jQuery.trim(myJSON.Album.Images[0].photoname).replace(/&#39;/gi,"'").replace(/&quot;/gi,'"')+'"><span>'+config.contMoreLinkText+"</span></a></div>":t+='<div class="rs-photo-gallery-more-link hidden" style="display: none;"><a href="'+myJSON.Album.Images[0].link+'" target="'+myJSON.Album.Images[0].target+'" aria-label="Read more about gallery slide 1: '+jQuery.trim(myJSON.Album.Images[0].photoname).replace(/&#39;/gi,"'").replace(/&quot;/gi,'"')+'"><span>'+config.contMoreLinkText+"</span></a></div>"),"yes"==config.galleryOverlay&&(""!=jQuery.trim(myJSON.Album.Images[0].link)&&-1<$.inArray("overlay",config.linkedElement)||""!=jQuery.trim(myJSON.Album.Images[0].link)&&-1<$.inArray("all",config.linkedElement)?t+='<a class="rs-photo-gallery-overlay" href="'+jQuery.trim(myJSON.Album.Images[0].link)+'" target="'+myJSON.Album.Images[0].target+'" tabindex="0" aria-label="Click to Read More About This Slide"></a>':t+='<a class="rs-photo-gallery-overlay" href="#" onclick="return false;" style="cursor: default;" tabindex="-1" aria-label="Click to Read More About This Slide"></a>'),t+="</div></div>",$(element).append(t),"slide"==config.transitionType&&sliderDimReset()}function loadInitImages(){loadImage(!0,0),"slide"==config.transitionType&&1==recordNum?(loadImage(!0,1),loadImage(!0,2)):1<recordNum&&loadImage(!0,1),"slide"==config.transitionType&&2<=recordNum&&loadImage(!0,2)}function loadImage(e,t){var l=1==e?$(".image.loading",element).eq(t):$(".image.loading.next-load",element),a=jQuery.trim($(".record-link",l).text()),i=jQuery.trim($(".record-link-target",l).text());"hide"==jQuery.trim($(".record-title",l).text()).toLowerCase()||jQuery.trim($(".record-title",l).text());$('<img src="'+jQuery.trim($(".record-src",l).text())+'" alt="'+jQuery.trim($(".record-title",l).text())+'" />').one("load",function(){$(".record-src, .record-title, .record-link, .record-link-target, .loader",l).remove(),l.removeClass("loading hidden next-load").prepend($(this)),""!=a&&(-1<$.inArray("image",config.linkedElement)||-1<$.inArray("all",config.linkedElement))&&l.children("img").wrapAll("<a href='"+a+"' target='"+i+"' tabindex='"+(l.hasClass("active")?"0":"-1")+"'></a>"),windowResize(),config.onImageLoad.call(this),$(".image.loading",element).length||config.allImagesLoaded.call(this)})}function loadImages(){$(".image.loading",element).each(function(){var e=$(this),t=jQuery.trim($(".record-link",e).text()),l=jQuery.trim($(".record-link-target",e).text());"hide"==jQuery.trim($(".record-title",e).text()).toLowerCase()||jQuery.trim($(".record-title",e).text());$('<img src="'+jQuery.trim($(".record-src",e).text())+'" alt="'+jQuery.trim($(".record-title",e).text())+'" />').one("load",function(){$(".record-src, .record-title, .record-link, .record-link-target, .loader",e).remove(),e.removeClass("loading hidden").prepend($(this)),""!=t&&(-1<$.inArray("image",config.linkedElement)||-1<$.inArray("all",config.linkedElement))&&e.children("img").wrapAll("<a href='"+t+"' target='"+l+"' tabindex='"+(e.hasClass("active")?"0":"-1")+"'></a>"),windowResize(),config.onImageLoad.call(this),$(".image.loading",element).length||config.allImagesLoaded.call(this)})})}function batchImageLoad(){$(".image.batch-item",element).each(function(){var e=$(this),t=jQuery.trim($(".record-link",e).text()),l=jQuery.trim($(".record-link-target",e).text());"hide"==jQuery.trim($(".record-title",e).text()).toLowerCase()||jQuery.trim($(".record-title",e).text());$('<img src="'+jQuery.trim($(".record-src",e).text())+'" alt="'+jQuery.trim($(".record-title",e).text())+'" />').one("load",function(){$(".record-src, .record-title, .record-link, .record-link-target, .loader",e).remove(),e.removeClass("loading hidden batch-item").prepend($(this)),""!=t&&(-1<$.inArray("image",config.linkedElement)||-1<$.inArray("all",config.linkedElement))&&e.children("img").wrapAll("<a href='"+t+"' target='"+l+"' tabindex='"+(e.hasClass("active")?"0":"-1")+"'></a>"),config.onImageLoad.call(this),$(".image.loading",element).length||config.allImagesLoaded.call(this)})})}function loadThumbs(){"yes"==config.thumbnails&&1<recordNum&&$(".thumbnail-image.loading",element).each(function(){var n=$(this),e="hide"==jQuery.trim($(".thumbnail-title",n).text()).toLowerCase()?"":'title="'+jQuery.trim($(".thumbnail-title",n).text())+'"';$('<img src="'+jQuery.trim($(".thumbnail-src",n).text())+'" '+e+' alt="'+jQuery.trim($(".thumbnail-title",n).text())+'" />').one("load",function(){if($(".thumbnail-src, .thumbnail-title",n).remove(),n.removeClass("loading hidden").prepend($(this)),config.onThumbnailLoad.call(this),!$(".thumbnail-image.loading",element).length)if(config.allThumbnailsLoaded.call(this),"vertical"==config.thumbnailSlideDirection){var e=$(".rs-photo-gallery-thumbnail-list",element).outerWidth(!0);if($(".rs-photo-gallery-thumbnails-outer",element).css("width",e+"px"),$(".rs-photo-gallery-thumbnails",element).css("width",e+"px"),$(".rs-photo-gallery-thumbnails",element).outerHeight(!0)<(s=$(".rs-photo-gallery-thumbnail-list",element).outerHeight(!0))){var t=$(".rs-photo-gallery-thumb-control.back",element).outerHeight(!0)+10,l=$(".rs-photo-gallery-thumb-control.next",element).outerHeight(!0)+10;$(".rs-photo-gallery-thumb-control",element).removeClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({top:t+"px",bottom:l+"px"}),$(".rs-photo-gallery-thumbnail-list",element).css({"padding-top":"0px","padding-bottom":"0px","margin-top":"0px","margin-bottom":"0px"})}}else if("horizontal"==config.thumbnailSlideDirection){var a=0;if($(".rs-photo-gallery-thumbnail",element).each(function(){a+=$(this).outerWidth(!0)}),$(".rs-photo-gallery-thumbnail-list",element).css("width",a+"px"),$(".rs-photo-gallery-thumbnails",element).outerWidth(!0)<(e=$(".rs-photo-gallery-thumbnail-list",element).outerWidth(!0))){var i=$(".rs-photo-gallery-thumb-control.back",element).outerWidth(!0)+10,o=$(".rs-photo-gallery-thumb-control.next",element).outerWidth(!0)+10;$(".rs-photo-gallery-thumb-control",element).removeClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({left:i+"px",right:o+"px"}),$(".rs-photo-gallery-thumbnail-list",element).css({"padding-left":"0px","padding-right":"0px","margin-left":"0px","margin-right":"0px"})}var s=$(".rs-photo-gallery-thumbnail-list",element).outerHeight(!0);$(".rs-photo-gallery-thumbnails-outer",element).css("height",s+"px"),$(".rs-photo-gallery-thumbnails",element).css("height",s+"px");var r=s/2;$(".rs-photo-gallery-thumb-control",element).css("padding-top",r+"px")}})})}function galleryEvents(){$(document).on("keydown",function(e){setTimeout(function(){$("#rs-photo-gallery-container-"+elemID).find(":focus").length?($(".rs-photo-gallery-container",element).addClass("cs-hover"),timerStop()):$(".rs-photo-gallery-container",element).hasClass("cs-hover")&&($(".rs-photo-gallery-container",element).removeClass("cs-hover"),timerStop(),timerReset())},100)}),"yes"==config.mainControls&&($(".rs-photo-gallery-control",element).click(function(){$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),$(this).hasClass("next")?galleryAnimate("next"):$(this).hasClass("back")&&galleryAnimate("prev"),timerReset())}),$(".rs-photo-gallery-control",element).keydown(function(e){e.keyCode!=csKeyCodes.space&&e.keyCode!=csKeyCodes.enter||(e.preventDefault(),$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),$(this).hasClass("next")?galleryAnimate("next"):$(this).hasClass("back")&&galleryAnimate("prev"),timerReset()))})),$("#rs-photo-gallery-container-"+elemID).on("swiperight",function(e){$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),galleryAnimate("prev"),timerReset())}),$("#rs-photo-gallery-container-"+elemID).on("swipeleft",function(e){$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),galleryAnimate("next"),timerReset())}),"yes"==config.bulletControls&&($(".rs-photo-gallery-bullet-control",element).click(function(){$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),$(this).hasClass("next")?galleryAnimate("next"):$(this).hasClass("back")&&galleryAnimate("prev"),timerReset())}),$(".rs-photo-gallery-bullet-control",element).keydown(function(e){e.keyCode!=csKeyCodes.space&&e.keyCode!=csKeyCodes.enter||(e.preventDefault(),$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),$(this).hasClass("next")?galleryAnimate("next"):$(this).hasClass("back")&&galleryAnimate("prev"),timerReset()))})),"yes"==config.bullets&&($(".rs-photo-gallery-bullet",element).click(function(){if(!$(this).hasClass("active")&&!$(".rs-photo-gallery-container",element).hasClass("animating")){var e=$(this).index();timerStop(),bulletGalleryAnimate(e),timerReset()}}),$(".rs-photo-gallery-bullet",element).keydown(function(e){switch(e.keyCode){case csKeyCodes.left:case csKeyCodes.up:e.preventDefault(),$(this).hasClass("first")?$(this).parent().find(".rs-photo-gallery-bullet.last").focus():$(this).prev(".rs-photo-gallery-bullet").focus();break;case csKeyCodes.right:case csKeyCodes.down:e.preventDefault(),$(this).hasClass("last")?$(this).parent().find(".rs-photo-gallery-bullet.first").focus():$(this).next(".rs-photo-gallery-bullet").focus();break;case csKeyCodes.home:e.preventDefault(),$(this).parent().find(".rs-photo-gallery-bullet.last").focus();break;case csKeyCodes.end:e.preventDefault(),$(this).parent().find(".rs-photo-gallery-bullet.first").focus();break;case csKeyCodes.space:case csKeyCodes.enter:if(e.preventDefault(),!$(this).hasClass("active")&&!$(".rs-photo-gallery-container",element).hasClass("animating")){var t=$(this).index();timerStop(),bulletGalleryAnimate(t),timerReset()}}})),"yes"==config.thumbnails&&($("#rs-photo-gallery-container-"+elemID).on("click keydown",".rs-photo-gallery-thumb-control",function(e){if(("click"==e.type||"keydown"==e.type&&e.keyCode==csKeyCodes.enter||"keydown"==e.type&&e.keyCode==csKeyCodes.space)&&(e.preventDefault(),!$(".rs-photo-gallery-thumbnails-outer",element).hasClass("animating")))if($(".rs-photo-gallery-thumbnails-outer",element).addClass("animating"),"horizontal"==config.thumbnailSlideDirection){var t=$(".thumbnail-image",element).outerWidth(!0),l=$(".thumbnail-image.first",element).outerWidth(!0),a=$(".thumbnail-image.last",element).outerWidth(!0),i=-1*parseInt($(".rs-photo-gallery-thumbnail-list",element).css("left")),o=$(".rs-photo-gallery-thumbnail-list",element).outerWidth(!0)-$(".rs-photo-gallery-thumbnails",element).outerWidth(!0)-i,s=0;$(this).hasClass("next")?(s=o<a?i+o:i+t,$(".rs-photo-gallery-thumbnail-list",element).animate({left:"-"+s+"px"},400,function(){$(".rs-photo-gallery-thumbnails-outer",element).removeClass("animating")})):$(this).hasClass("back")&&(s=i<l?0:i-t,$(".rs-photo-gallery-thumbnail-list",element).animate({left:"-"+s+"px"},400,function(){$(".rs-photo-gallery-thumbnails-outer",element).removeClass("animating")}))}else if("vertical"==config.thumbnailSlideDirection){t=$(".thumbnail-image",element).outerHeight(!0),l=$(".thumbnail-image.first",element).outerHeight(!0),a=$(".thumbnail-image.last",element).outerHeight(!0),i=-1*parseInt($(".rs-photo-gallery-thumbnail-list",element).css("top")),o=$(".rs-photo-gallery-thumbnail-list",element).outerHeight(!0)-$(".rs-photo-gallery-thumbnails",element).outerHeight(!0)-i,s=0;$(this).hasClass("next")?(s=o<a?i+o:i+t,$(".rs-photo-gallery-thumbnail-list",element).animate({top:"-"+s+"px"},400,function(){$(".rs-photo-gallery-thumbnails-outer",element).removeClass("animating")})):$(this).hasClass("back")&&(s=i<l?0:i-t,$(".rs-photo-gallery-thumbnail-list",element).animate({top:"-"+s+"px"},400,function(){$(".rs-photo-gallery-thumbnails-outer",element).removeClass("animating")}))}}),$(".rs-photo-gallery-thumbnail",element).click(function(){if(!$(this).hasClass("active")&&!$(".rs-photo-gallery-container",element).hasClass("animating")){var e=$(this).index();"yes"==config.autoRotate&&clearInterval(galleryTimer[elemID]),thumbnailGalleryAnimate(e),timerReset()}}),$(".rs-photo-gallery-thumbnail",element).keydown(function(e){switch(e.keyCode){case csKeyCodes.left:case csKeyCodes.up:e.preventDefault(),$(this).hasClass("first")?$(this).parent().find(".rs-photo-gallery-thumbnail.last").focus():$(this).prev(".rs-photo-gallery-thumbnail").focus();break;case csKeyCodes.right:case csKeyCodes.down:e.preventDefault(),$(this).hasClass("last")?$(this).parent().find(".rs-photo-gallery-thumbnail.first").focus():$(this).next(".rs-photo-gallery-thumbnail").focus();break;case csKeyCodes.home:e.preventDefault(),$(this).parent().find(".rs-photo-gallery-thumbnail.last").focus();break;case csKeyCodes.end:e.preventDefault(),$(this).parent().find(".rs-photo-gallery-thumbnail.first").focus();break;case csKeyCodes.space:case csKeyCodes.enter:if(e.preventDefault(),!$(this).hasClass("active")&&!$(".rs-photo-gallery-container",element).hasClass("animating")){var t=$(this).index();"yes"==config.autoRotate&&clearInterval(galleryTimer[elemID]),thumbnailGalleryAnimate(t),timerReset()}}})),"yes"==config.hoverPause&&($(".rs-photo-gallery-container",element).hover(function(){$(this).addClass("cs-hover"),timerStop()},function(){$("#rs-photo-gallery-container-"+elemID).find(":focus").length||($(this).removeClass("cs-hover"),timerStop(),timerReset())}),$(".rs-photo-gallery-container",element).on("touchend",function(e){$("#rs-photo-gallery-container-"+elemID).find(":focus").length||($(this).removeClass("cs-hover"),timerStop(),timerReset())})),$(".rs-photo-gallery-control.play-pause",element).click(function(){$(this).hasClass("playing")?($(this).removeClass("playing").addClass("paused").attr("aria-label","Play Gallery - Currently on Slide "+(parseInt($(".rs-photo-gallery-images-list li.active",element).attr("index"))+1)+" of "+recordNum),timerStop()):$(this).hasClass("paused")&&($(this).removeClass("paused").addClass("playing").attr("aria-label","Pause Gallery - Currently on Slide "+(parseInt($(".rs-photo-gallery-images-list li.active",element).attr("index"))+1)+" of "+recordNum),$("#rs-photo-gallery-container-"+elemID).find(":focus").length||(timerStop(),timerReset()))}),$(".rs-photo-gallery-control.play-pause",element).keydown(function(e){e.keyCode!=csKeyCodes.space&&e.keyCode!=csKeyCodes.enter||(e.preventDefault(),$(this).hasClass("playing")?($(this).removeClass("playing").addClass("paused").attr("aria-label","Play Gallery - Currently on Slide "+(parseInt($(".rs-photo-gallery-images-list li.active",element).attr("index"))+1)+" of "+recordNum),timerStop()):$(this).hasClass("paused")&&($(this).removeClass("paused").addClass("playing").attr("aria-label","Pause Gallery - Currently on Slide "+(parseInt($(".rs-photo-gallery-images-list li.active",element).attr("index"))+1)+" of "+recordNum),$("#rs-photo-gallery-container-"+elemID).find(":focus").length||(timerStop(),timerReset())))}),"yes"!=config.fullScreenRotator&&$(element).parents(".region").children().on("click",function(){windowResize()})}function timerReset(){"yes"==config.playPause?$(".rs-photo-gallery-control.play-pause",element).hasClass("playing")&&!$(".rs-photo-gallery-container",element).hasClass("cs-hover")&&"yes"==config.autoRotate&&galleryTimer():$(".rs-photo-gallery-container",element).hasClass("cs-hover")||"yes"==config.autoRotate&&galleryTimer()}function timerStop(){"yes"==config.autoRotate&&clearInterval(galleryTimer[elemID])}function galleryRotate(){$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).hasClass("last")?galleryAnimate("first"):galleryAnimate("next")}function galleryAnimate(e){if($(".rs-photo-gallery-container",element).addClass("animating"),"yes"!=config.titles&&"yes"!=config.captions||fadeTitlesCaptions(),"next"==e){if(config.onTransitionStart.call(this),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading.next-load",element).length&&loadImage(),"yes"==config.bullets&&($(".rs-photo-gallery-bullet.active",element).removeClass("active"),$(".rs-photo-gallery-bullet.prev",element).removeClass("prev"),$(".rs-photo-gallery-bullet.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-bullet.active",element).next(".rs-photo-gallery-bullet").addClass("next"),$(".rs-photo-gallery-bullet.active",element).prev(".rs-photo-gallery-bullet").addClass("prev"),$(".rs-photo-gallery-bullet.next",element).length||$(".rs-photo-gallery-bullet.first",element).addClass("next"),$(".rs-photo-gallery-bullet.prev",element).length||$(".rs-photo-gallery-bullet.last",element).addClass("prev")),"yes"==config.thumbnails&&($(".rs-photo-gallery-thumbnail.active",element).removeClass("active"),$(".rs-photo-gallery-thumbnail.prev",element).removeClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-thumbnail.active",element).next(".rs-photo-gallery-thumbnail").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).prev(".rs-photo-gallery-thumbnail").addClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).length||$(".rs-photo-gallery-thumbnail.first",element).addClass("next"),$(".rs-photo-gallery-thumbnail.prev",element).length||$(".rs-photo-gallery-thumbnail.last",element).addClass("prev")),"fade"==config.transitionType)updateMoreLinks(i=$(".rs-photo-gallery-images-list li.next",element).index()),updateOverlay(i),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).fadeOut(1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).removeClass("active").attr("aria-hidden","true"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).removeClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active").attr("aria-hidden","false"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.first",element).addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.last",element).addClass("prev"),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load")),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("display",""),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),updateControls(),config.onTransitionEnd.call(this)});else if("slide"==config.transitionType){updateMoreLinks(i=$(".rs-photo-gallery-images-list li.next",element).attr("index")),updateOverlay(i);var t=-1*parseInt($(".rs-photo-gallery-images-list",element).css("left"));if("yes"==config.fullScreenRotator)var l=$(window).width();else l=$(element).width()>config.imageWidth?config.imageWidth:$(element).width();var a=t+l,i=$(".rs-photo-gallery-images-list li.next",element).attr("index");$(".rs-photo-gallery-images-list",element).animate({left:"-"+a+"px"},1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images-list",element).append($(".rs-photo-gallery-images-list li",element).eq(0)),$(".rs-photo-gallery-images-list li.active",element).removeClass("active").attr("aria-hidden","true"),$(".rs-photo-gallery-images-list li.prev",element).removeClass("prev"),$(".rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active").attr("aria-hidden","false"),$(".rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load")),sliderDimReset(),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),updateControls(),config.onTransitionEnd.call(this)})}}else if("prev"==e){if(config.onTransitionStart.call(this),"yes"==config.efficientLoad&&"fade"==config.transitionType&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.prev",element).hasClass("loading")&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.prev",element).addClass("next-load"),loadImage())),"yes"==config.bullets&&($(".rs-photo-gallery-bullet.next",element).removeClass("next"),$(".rs-photo-gallery-bullet.prev",element).removeClass("prev").addClass("next"),$(".rs-photo-gallery-bullet.active",element).removeClass("active"),$(".rs-photo-gallery-bullet.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-bullet.active",element).next(".rs-photo-gallery-bullet").addClass("next"),$(".rs-photo-gallery-bullet.active",element).prev(".rs-photo-gallery-bullet").addClass("prev"),$(".rs-photo-gallery-bullet.next",element).length||$(".rs-photo-gallery-bullet.first",element).addClass("next"),$(".rs-photo-gallery-bullet.prev",element).length||$(".rs-photo-gallery-bullet.last",element).addClass("prev")),"yes"==config.thumbnails&&($(".rs-photo-gallery-thumbnail.next",element).removeClass("next"),$(".rs-photo-gallery-thumbnail.prev",element).removeClass("prev").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).removeClass("active"),$(".rs-photo-gallery-thumbnail.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-thumbnail.active",element).next(".rs-photo-gallery-thumbnail").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).prev(".rs-photo-gallery-thumbnail").addClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).length||$(".rs-photo-gallery-thumbnail.first",element).addClass("next"),$(".rs-photo-gallery-thumbnail.prev",element).length||$(".rs-photo-gallery-thumbnail.last",element).addClass("prev")),"slide"==config.transitionType&&($(".rs-photo-gallery-images-list",element).prepend($(".rs-photo-gallery-images-list li",element).last()),"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).first().hasClass("loading")&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).first().addClass("next-load"),loadImage())),sliderDimReset()),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).removeClass("prev").addClass("next"),"fade"==config.transitionType)var o=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).index();else if("slide"==config.transitionType)o=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).attr("index");if("yes"==config.titles&&("hide"==jQuery.trim(myJSON.Album.Images[o].photoname).toLowerCase()?$(".rs-photo-title.next",element).empty().addClass("hidden"):""!=jQuery.trim(myJSON.Album.Images[o].link)&&(-1<$.inArray("title",config.linkedElement)||-1<$.inArray("all",config.linkedElement))?$(".rs-photo-title.next",element).html("<h1><a href='"+jQuery.trim(myJSON.Album.Images[o].link)+"' target='"+myJSON.Album.Images[o].target+"'>"+jQuery.trim(myJSON.Album.Images[o].photoname)+"</a></h1>").removeClass("hidden").removeAttr("style"):$(".rs-photo-title.next",element).html("<h1>"+jQuery.trim(myJSON.Album.Images[o].photoname)+"</h1>").removeClass("hidden").removeAttr("style")),"yes"==config.captions&&("hide"==jQuery.trim(myJSON.Album.Images[o].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[o].caption)?$(".rs-photo-caption.next",element).empty().addClass("hidden"):$(".rs-photo-caption.next",element).html("<p>"+jQuery.trim(myJSON.Album.Images[o].caption)+"</p>").removeClass("hidden").removeAttr("style")),"fade"==config.transitionType)updateMoreLinks(i=$(".rs-photo-gallery-images-list li.next",element).index()),updateOverlay(i),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).fadeOut(1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).removeClass("active").attr("aria-hidden","true"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active").attr("aria-hidden","false"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.first",element).addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.last",element).addClass("prev"),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load")),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("display",""),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),updateControls(),config.onTransitionEnd.call(this)});else if("slide"==config.transitionType){updateMoreLinks(i=$(".rs-photo-gallery-images-list li.active",element).prev(".image").attr("index")),updateOverlay(i);t=-1*parseInt($(".rs-photo-gallery-images-list",element).css("left"));if("yes"==config.fullScreenRotator)l=$(window).width();else l=$(element).width()>config.imageWidth?config.imageWidth:$(element).width();a=t-l,i=$(".rs-photo-gallery-images-list li."+e,element).index()-1;$(".rs-photo-gallery-images-list",element).animate({left:"-"+a+"px"},1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images-list li.active",element).removeClass("active").attr("aria-hidden","true"),$(".rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active").attr("aria-hidden","false"),$(".rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load")),sliderDimReset(),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),updateControls(),config.onTransitionEnd.call(this)})}}else"first"==e&&(config.onTransitionStart.call(this),"yes"==config.bullets&&($(".rs-photo-gallery-bullet.active",element).removeClass("active"),$(".rs-photo-gallery-bullet.prev",element).removeClass("prev"),$(".rs-photo-gallery-bullet.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-bullet.active",element).next(".rs-photo-gallery-bullet").addClass("next"),$(".rs-photo-gallery-bullet.active",element).prev(".rs-photo-gallery-bullet").addClass("prev"),$(".rs-photo-gallery-bullet.prev",element).length||$(".rs-photo-gallery-bullet.last",element).addClass("prev")),"yes"==config.thumbnails&&($(".rs-photo-gallery-thumbnail.active",element).removeClass("active"),$(".rs-photo-gallery-thumbnail.prev",element).removeClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-thumbnail.active",element).next(".rs-photo-gallery-thumbnail").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).prev(".rs-photo-gallery-thumbnail").addClass("prev"),$(".rs-photo-gallery-thumbnail.prev",element).length||$(".rs-photo-gallery-thumbnail.last",element).addClass("prev")),updateMoreLinks(0),updateOverlay(0),"fade"==config.transitionType&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).fadeOut(1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).removeClass("active").attr("aria-hidden","true"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).removeClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active").attr("aria-hidden","false"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.last",element).addClass("prev"),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load")),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("display",""),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),updateControls(),config.onTransitionEnd.call(this)}))}function bulletGalleryAnimate(t){if($(".rs-photo-gallery-container",element).addClass("animating"),"yes"==config.bulletControls&&(t-=1),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).removeClass("prev").removeClass("next"),$(".rs-photo-gallery-bullet",element).removeClass("prev").removeClass("next"),"yes"==config.thumbnails&&$(".rs-photo-gallery-thumbnail",element).removeClass("prev").removeClass("next"),"fade"==config.transitionType)$(".rs-photo-gallery-images .rs-photo-gallery-images-list li:eq("+t+")",element).addClass("next"),"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).hasClass("loading")&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).addClass("next-load"),loadImage(),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load"))));else if("slide"==config.transitionType){var e=$(".rs-photo-gallery-bullet.active",element).index();"yes"==config.bulletControls&&(e-=1);var l=0,a="";if(t<e){a="backward",l=e-t;for(var i=0;i<l;i++){var o=$(".rs-photo-gallery-images-list li",element).eq(recordNum-1).clone().attr("class","image clone");$(".rs-photo-gallery-images-list",element).prepend(o)}sliderDimReset()}else if(e<t){a="forward",l=t-e,"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".image.loading",element).each(function(){$(this).addClass("batch-item")}));for(i=0;i<l;i++){o=$(".rs-photo-gallery-images-list li",element).eq(i).clone().removeClass("prev next active").addClass("clone");$(".rs-photo-gallery-images-list",element).append(o)}"yes"==config.efficientLoad&&$(".batch-item",element).length&&batchImageLoad(),sliderDimReset()}if("forward"==a)var s=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).index()+l;else if("backward"==a)s=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).index()-l;$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).eq(s).addClass("next")}if($(".rs-photo-gallery-bullet:eq("+t+")",element).addClass("next"),"yes"==config.thumbnails&&$(".rs-photo-gallery-thumbnail:eq("+t+")",element).addClass("next"),"fade"==config.transitionType)var r=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).index();else if("slide"==config.transitionType)r=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).attr("index");if("yes"==config.titles&&("hide"==jQuery.trim(myJSON.Album.Images[r].photoname).toLowerCase()?$(".rs-photo-title.next",element).empty().addClass("hidden"):""!=jQuery.trim(myJSON.Album.Images[r].link)&&(-1<$.inArray("title",config.linkedElement)||-1<$.inArray("all",config.linkedElement))?$(".rs-photo-title.next",element).html("<h1><a href='"+jQuery.trim(myJSON.Album.Images[r].link)+"' target='"+myJSON.Album.Images[r].target+"'>"+jQuery.trim(myJSON.Album.Images[r].photoname)+"</a></h1>").removeClass("hidden").removeAttr("style"):$(".rs-photo-title.next",element).html("<h1>"+jQuery.trim(myJSON.Album.Images[r].photoname)+"</h1>").removeClass("hidden").removeAttr("style")),"yes"==config.captions&&("hide"==jQuery.trim(myJSON.Album.Images[r].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[r].caption)?$(".rs-photo-caption.next",element).empty().addClass("hidden"):$(".rs-photo-caption.next",element).html("<p>"+jQuery.trim(myJSON.Album.Images[r].caption)+"</p>").removeClass("hidden").removeAttr("style")),$(".rs-photo-gallery-bullet.active",element).removeClass("active"),$(".rs-photo-gallery-bullet.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-bullet.active",element).next(".rs-photo-gallery-bullet").addClass("next"),$(".rs-photo-gallery-bullet.active",element).prev(".rs-photo-gallery-bullet").addClass("prev"),$(".rs-photo-gallery-bullet.next",element).length||$(".rs-photo-gallery-bullet.first",element).addClass("next"),$(".rs-photo-gallery-bullet.prev",element).length||$(".rs-photo-gallery-bullet.last",element).addClass("prev"),"yes"==config.thumbnails&&($(".rs-photo-gallery-thumbnail.active",element).removeClass("active"),$(".rs-photo-gallery-thumbnail.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-thumbnail.active",element).next(".rs-photo-gallery-thumbnail").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).prev(".rs-photo-gallery-thumbnail").addClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).length||$(".rs-photo-gallery-thumbnail.first",element).addClass("next"),$(".rs-photo-gallery-thumbnail.prev",element).length||$(".rs-photo-gallery-thumbnail.last",element).addClass("prev")),updateMoreLinks(r),updateOverlay(r),config.onTransitionStart.call(this),"yes"!=config.titles&&"yes"!=config.captions||fadeTitlesCaptions(),"fade"==config.transitionType)$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).fadeOut(1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).removeClass("active").attr("aria-hidden","true"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active").attr("aria-hidden","false"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.first",element).addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.last",element).addClass("prev"),"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading.next-load",element).length&&loadImage(),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load"))),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("display",""),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),updateControls(),config.onTransitionEnd.call(this)});else if("slide"==config.transitionType){if("yes"==config.fullScreenRotator)var n=$(window).width();else n=$(element).width()>config.imageWidth?config.imageWidth:$(element).width();var m=n*$(".rs-photo-gallery-images-list li.next",element).index();$(".rs-photo-gallery-images-list",element).animate({left:"-"+m+"px"},1e3*config.transitionSpeed,function(){if($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.clone",element).remove(),"backward"==a){for(var e=0;e<l;e++)$(".rs-photo-gallery-images-list",element).prepend($(".rs-photo-gallery-images-list li",element).last());sliderDimReset()}else if("forward"==a){for(e=0;e<l;e++)$(".rs-photo-gallery-images-list",element).append($(".rs-photo-gallery-images-list li",element).first());sliderDimReset()}$(".rs-photo-gallery-images-list li.active",element).removeClass("active").attr("aria-hidden","true"),$(".rs-photo-gallery-images-list li.prev",element).removeClass("prev"),$(".rs-photo-gallery-images-list li.next",element).removeClass("next"),$(".rs-photo-gallery-images-list li[index='"+t+"']",element).first().addClass("active").attr("aria-hidden","false"),$(".rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),sliderDimReset(),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),updateControls(),config.onTransitionEnd.call(this)})}}function thumbnailGalleryAnimate(t){if($(".rs-photo-gallery-container",element).addClass("animating"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).removeClass("prev").removeClass("next"),"yes"==config.bullets&&$(".rs-photo-gallery-bullet",element).removeClass("prev").removeClass("next"),$(".rs-photo-gallery-thumbnail",element).removeClass("prev").removeClass("next"),"fade"==config.transitionType)$(".rs-photo-gallery-images .rs-photo-gallery-images-list li:eq("+t+")",element).addClass("next"),"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).hasClass("loading")&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).addClass("next-load"),loadImage(),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load"))));else if("slide"==config.transitionType){var e=$(".rs-photo-gallery-thumbnail.active",element).index(),l=0,a="";if(t<e){a="backward",l=e-t;for(var i=0;i<l;i++){var o=$(".rs-photo-gallery-images-list li",element).eq(recordNum-1).clone().attr("class","image clone");$(".rs-photo-gallery-images-list",element).prepend(o)}sliderDimReset()}else if(e<t){a="forward",l=t-e,"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".image.loading",element).each(function(){$(this).addClass("batch-item")}));for(i=0;i<l;i++){o=$(".rs-photo-gallery-images-list li",element).eq(i).clone().attr("class","image clone");$(".rs-photo-gallery-images-list",element).append(o)}"yes"==config.efficientLoad&&$(".batch-item",element).length&&batchImageLoad(),sliderDimReset()}if("forward"==a)var s=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).index()+l;else if("backward"==a)s=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).index()-l;$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).eq(s).addClass("next")}if("yes"==config.bullets&&$(".rs-photo-gallery-bullet:eq("+t+")",element).addClass("next"),$(".rs-photo-gallery-thumbnail:eq("+t+")",element).addClass("next"),"fade"==config.transitionType)var r=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).index();else if("slide"==config.transitionType)r=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).attr("index");if("yes"==config.titles&&("hide"==jQuery.trim(myJSON.Album.Images[r].photoname).toLowerCase()?$(".rs-photo-title.next",element).empty().addClass("hidden"):""!=jQuery.trim(myJSON.Album.Images[r].link)&&(-1<$.inArray("title",config.linkedElement)||-1<$.inArray("all",config.linkedElement))?$(".rs-photo-title.next",element).html("<h1><a href='"+jQuery.trim(myJSON.Album.Images[r].link)+"' target='"+myJSON.Album.Images[r].target+"'>"+jQuery.trim(myJSON.Album.Images[r].photoname)+"</a></h1>").removeClass("hidden").removeAttr("style"):$(".rs-photo-title.next",element).html("<h1>"+jQuery.trim(myJSON.Album.Images[r].photoname)+"</h1>").removeClass("hidden").removeAttr("style")),"yes"==config.captions&&("hide"==jQuery.trim(myJSON.Album.Images[r].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[r].caption)?$(".rs-photo-caption.next",element).empty().addClass("hidden"):$(".rs-photo-caption.next",element).html("<p>"+jQuery.trim(myJSON.Album.Images[r].caption)+"</p>").removeClass("hidden").removeAttr("style")),"yes"==config.bullets&&($(".rs-photo-gallery-bullet.active",element).removeClass("active"),$(".rs-photo-gallery-bullet.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-bullet.active",element).next(".rs-photo-gallery-bullet").addClass("next"),$(".rs-photo-gallery-bullet.active",element).prev(".rs-photo-gallery-bullet").addClass("prev"),$(".rs-photo-gallery-bullet.next",element).length||$(".rs-photo-gallery-bullet.first",element).addClass("next"),$(".rs-photo-gallery-bullet.prev",element).length||$(".rs-photo-gallery-bullet.last",element).addClass("prev")),$(".rs-photo-gallery-thumbnail.active",element).removeClass("active"),$(".rs-photo-gallery-thumbnail.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-thumbnail.active",element).next(".rs-photo-gallery-thumbnail").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).prev(".rs-photo-gallery-thumbnail").addClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).length||$(".rs-photo-gallery-thumbnail.first",element).addClass("next"),$(".rs-photo-gallery-thumbnail.prev",element).length||$(".rs-photo-gallery-thumbnail.last",element).addClass("prev"),updateMoreLinks(r),updateOverlay(r),config.onTransitionStart.call(this),"yes"!=config.titles&&"yes"!=config.captions||fadeTitlesCaptions(),"fade"==config.transitionType)$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).fadeOut(1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).removeClass("active").attr("aria-hidden","true"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active").attr("aria-hidden","false"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.first",element).addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.last",element).addClass("prev"),"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading.next-load",element).length&&loadImage(),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load"))),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("display",""),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),updateControls(),config.onTransitionEnd.call(this)});else if("slide"==config.transitionType){if("yes"==config.fullScreenRotator)var n=$(window).width();else n=$(element).width()>config.imageWidth?config.imageWidth:$(element).width();var m=n*$(".rs-photo-gallery-images-list li.next",element).index();$(".rs-photo-gallery-images-list",element).animate({left:"-"+m+"px"},1e3*config.transitionSpeed,function(){if($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.clone",element).remove(),"backward"==a){for(var e=0;e<l;e++)$(".rs-photo-gallery-images-list",element).prepend($(".rs-photo-gallery-images-list li",element).last());sliderDimReset()}else if("forward"==a){for(e=0;e<l;e++)$(".rs-photo-gallery-images-list",element).append($(".rs-photo-gallery-images-list li",element).first());sliderDimReset()}$(".rs-photo-gallery-images-list li.active",element).removeClass("active").attr("aria-hidden","true"),$(".rs-photo-gallery-images-list li.prev",element).removeClass("prev"),$(".rs-photo-gallery-images-list li.next",element).removeClass("next"),$(".rs-photo-gallery-images-list li[index='"+t+"']",element).first().addClass("active").attr("aria-hidden","false"),$(".rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),sliderDimReset(),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),updateControls(),config.onTransitionEnd.call(this)})}}function fadeTitlesCaptions(){var e=$(".rs-photo-gallery-images ul.rs-photo-gallery-images-list li.next",element).index();if("fade"==config.transitionType)(a=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).index()+1)==recordNum&&(a=0);else if("slide"==config.transitionType)var a=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).next(".image").attr("index");var i=1e3*config.transitionSpeed/2;"yes"==config.titles&&"no"==config.captions?$(".rs-photo-title.next",element).hasClass("hidden")&&("yes"==config.descMoreLink?""==jQuery.trim(myJSON.Album.Images[e].link)&&(i=1e3*config.transitionSpeed,$(".rs-photo-gallery-desc",element).fadeOut(1e3*config.transitionSpeed,function(){$(this).addClass("hidden").removeAttr("style")})):(i=1e3*config.transitionSpeed,$(".rs-photo-gallery-desc",element).fadeOut(1e3*config.transitionSpeed,function(){$(this).addClass("hidden").removeAttr("style")}))):"no"==config.titles&&"yes"==config.captions?$(".rs-photo-caption.next",element).hasClass("hidden")&&("yes"==config.descMoreLink?""==jQuery.trim(myJSON.Album.Images[e].link)&&(i=1e3*config.transitionSpeed,$(".rs-photo-gallery-desc",element).fadeOut(1e3*config.transitionSpeed,function(){$(this).addClass("hidden").removeAttr("style")})):(i=1e3*config.transitionSpeed,$(".rs-photo-gallery-desc",element).fadeOut(1e3*config.transitionSpeed,function(){$(this).addClass("hidden").removeAttr("style")}))):"yes"==config.titles&&"yes"==config.captions&&$(".rs-photo-caption.next",element).hasClass("hidden")&&$(".rs-photo-title.next",element).hasClass("hidden")&&("yes"==config.descMoreLink?""==jQuery.trim(myJSON.Album.Images[e].link)&&(i=1e3*config.transitionSpeed,$(".rs-photo-gallery-desc",element).fadeOut(1e3*config.transitionSpeed,function(){$(this).addClass("hidden").removeAttr("style")})):(i=1e3*config.transitionSpeed,$(".rs-photo-gallery-desc",element).fadeOut(1e3*config.transitionSpeed,function(){$(this).addClass("hidden").removeAttr("style")}))),"yes"==config.titles&&"no"==config.captions?$(".rs-photo-gallery-desc",element).hasClass("hidden")&&(!$(".rs-photo-title.next",element).hasClass("hidden")||"yes"==config.descMoreLink&&""!=jQuery.trim(myJSON.Album.Images[e].link))&&$(".rs-photo-gallery-desc",element).fadeIn(1e3*config.transitionSpeed,function(){$(this).removeClass("hidden").removeAttr("style")}):"no"==config.titles&&"yes"==config.captions?$(".rs-photo-gallery-desc",element).hasClass("hidden")&&(!$(".rs-photo-caption.next",element).hasClass("hidden")||"yes"==config.descMoreLink&&""!=jQuery.trim(myJSON.Album.Images[e].link))&&$(".rs-photo-gallery-desc",element).fadeIn(1e3*config.transitionSpeed,function(){$(this).removeClass("hidden").removeAttr("style")}):"yes"==config.titles&&"yes"==config.captions&&$(".rs-photo-gallery-desc",element).hasClass("hidden")&&($(".rs-photo-caption.next",element).hasClass("hidden")&&$(".rs-photo-title.next",element).hasClass("hidden")&&("yes"!=config.descMoreLink||""==jQuery.trim(myJSON.Album.Images[e].link))||$(".rs-photo-gallery-desc",element).fadeIn(1e3*config.transitionSpeed,function(){$(this).removeClass("hidden").removeAttr("style")})),"yes"==config.titles&&$(".rs-photo-title.active",element).fadeOut(i,function(){var t=$(this);if($(".rs-photo-title.next",element).hasClass("hidden")){var e=$(".rs-photo-title.next",element);setNextTitle(a,e,t)}else{var l=0;$(this).hasClass("hidden")&&!$(".rs-photo-gallery-desc",element).hasClass("hidden")&&(l=1e3*config.transitionSpeed/2),$(".rs-photo-title.next",element).delay(l).fadeIn(i,function(){var e=$(this);setNextTitle(a,e,t)})}}),"yes"==config.captions&&$(".rs-photo-caption.active",element).fadeOut(i,function(){var t=$(this);if($(".rs-photo-caption.next",element).hasClass("hidden")){var e=$(".rs-photo-caption.next",element);setNextCaption(a,e,t)}else{var l=0;$(this).hasClass("hidden")&&!$(".rs-photo-gallery-desc",element).hasClass("hidden")&&(l=1e3*config.transitionSpeed/2),$(".rs-photo-caption.next",element).delay(l).fadeIn(i,function(){var e=$(this);setNextCaption(a,e,t)})}})}function setNextTitle(e,t,l){l.removeClass("active").addClass("next"),t.removeClass("next").addClass("active"),$(".rs-photo-title",element).removeAttr("style"),"hide"==jQuery.trim(myJSON.Album.Images[e].photoname).toLowerCase()?$(".rs-photo-title.next",element).empty().addClass("hidden").removeAttr("style"):""!=jQuery.trim(myJSON.Album.Images[e].link)&&(-1<$.inArray("title",config.linkedElement)||-1<$.inArray("all",config.linkedElement))?$(".rs-photo-title.next",element).html("<h1><a href='"+jQuery.trim(myJSON.Album.Images[e].link)+"' target='"+myJSON.Album.Images[e].target+"'>"+jQuery.trim(myJSON.Album.Images[e].photoname)+"</a></h1>").removeClass("hidden").removeAttr("style"):$(".rs-photo-title.next",element).html("<h1>"+jQuery.trim(myJSON.Album.Images[e].photoname)+"</h1>").removeClass("hidden").removeAttr("style")}function setNextCaption(e,t,l){l.removeClass("active").addClass("next"),t.removeClass("next").addClass("active"),$(".rs-photo-caption",element).removeAttr("style"),"hide"==jQuery.trim(myJSON.Album.Images[e].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[e].caption)?$(".rs-photo-caption.next",element).empty().addClass("hidden").removeAttr("style"):$(".rs-photo-caption.next",element).html("<p>"+jQuery.trim(myJSON.Album.Images[e].caption)+"</p>").removeClass("hidden").removeAttr("style")}function updateMoreLinks(e){if("yes"==config.contMoreLink)if($(".rs-photo-gallery-more-link a",element).attr({href:myJSON.Album.Images[e].link,target:myJSON.Album.Images[e].target,"aria-label":"Read more about gallery slide "+(parseInt(e)+1)+": "+jQuery.trim(myJSON.Album.Images[e].photoname).replace(/&#39;/gi,"'").replace(/&quot;/gi,'"')}),$(".rs-photo-gallery-more-link",element).hasClass("hidden")&&""!=jQuery.trim(myJSON.Album.Images[e].link)){var t=1e3*config.transitionSpeed/2;$(".rs-photo-gallery-more-link",element).delay(t).fadeIn(1e3*config.transitionSpeed/2,function(){$(this).removeClass("hidden")})}else $(".rs-photo-gallery-more-link",element).hasClass("hidden")||""!=jQuery.trim(myJSON.Album.Images[e].link)||$(".rs-photo-gallery-more-link",element).fadeOut(1e3*config.transitionSpeed/2,function(){$(this).addClass("hidden")});if("yes"==config.descMoreLink)if($(".rs-photo-gallery-desc-more-link a",element).attr({href:myJSON.Album.Images[e].link,target:myJSON.Album.Images[e].target,"aria-label":"Read more about gallery slide "+(parseInt(e)+1)+": "+jQuery.trim(myJSON.Album.Images[e].photoname).replace(/&#39;/gi,"'").replace(/&quot;/gi,'"')}),$(".rs-photo-gallery-desc-more-link",element).hasClass("hidden")&&""!=jQuery.trim(myJSON.Album.Images[e].link)){t=1e3*config.transitionSpeed/2;$(".rs-photo-gallery-desc-more-link",element).delay(t).fadeIn(1e3*config.transitionSpeed/2,function(){$(this).removeClass("hidden")})}else $(".rs-photo-gallery-desc-more-link",element).hasClass("hidden")||""!=jQuery.trim(myJSON.Album.Images[e].link)||$(".rs-photo-gallery-desc-more-link",element).fadeOut(1e3*config.transitionSpeed/2,function(){$(this).addClass("hidden")})}function updateOverlay(e){"yes"==config.galleryOverlay&&(""!=jQuery.trim(myJSON.Album.Images[e].link)&&-1<$.inArray("overlay",config.linkedElement)||""!=jQuery.trim(myJSON.Album.Images[e].link)&&-1<$.inArray("all",config.linkedElement)?$(".rs-photo-gallery-overlay",element).removeAttr("style").removeAttr("onclick").attr("href",jQuery.trim(myJSON.Album.Images[e].link)).attr("target",myJSON.Album.Images[e].target).attr("tabindex","0"):$(".rs-photo-gallery-overlay",element).css("cursor","default").attr("onclick","return false;").attr("href","#").attr("tabindex","-1"))}function updateControls(){"yes"==config.mainControls&&($(".rs-photo-gallery-control.back",element).attr("aria-label","Navigate to slide "+(parseInt($(".rs-photo-gallery-images-list li.prev",element).attr("index"))+1)+" of "+recordNum),$(".rs-photo-gallery-control.next",element).attr("aria-label","Navigate to slide "+(parseInt($(".rs-photo-gallery-images-list li.next",element).attr("index"))+1)+" of "+recordNum)),"yes"==config.playPause&&($(".rs-photo-gallery-control.play-pause",element).hasClass("playing")?$(".rs-photo-gallery-control.play-pause",element).attr("aria-label","Pause Gallery - Currently on Slide "+(parseInt($(".rs-photo-gallery-images-list li.active",element).attr("index"))+1)+" of "+recordNum):$(".rs-photo-gallery-control.play-pause",element).attr("aria-label","Play Gallery - Currently on Slide "+(parseInt($(".rs-photo-gallery-images-list li.active",element).attr("index"))+1)+" of "+recordNum))}function galleryTimer(){var e=myJSON.Album.transitiondelay<=config.transitionSpeed?config.transitionSpeed+1:myJSON.Album.transitiondelay;galleryTimer[elemID]=setInterval(function(){galleryRotate()},1e3*e+1e3*config.transitionSpeed)}function buildStyleSheet(){var e=document.createElement("style");if(e){e.setAttribute("type","text/css");var t=document.getElementsByTagName("head")[0];t&&t.insertBefore(e,t.childNodes[0]);var l="",a="",i="",o="",s="";"fade"==config.transitionType?(i="width: 100%; height: 100%; position: static;",l="position: relative;",a="width: 100%; position: absolute; top: 0px; left: 0px; display: none;"):"slide"==config.transitionType&&(i="position: relative;",l="position: absolute; top: 0px; left: 0px;",a="float: left;",o="#rs-photo-gallery-container-"+elemID+".rs-photo-gallery-container { position: relative; }"),"yes"==config.fullScreenRotator&&(s="overflow: hidden;");var r="",n="",m="",g="",h="",p="",d="";"horizontal"==config.thumbnailSlideDirection?(r="bottom: 0px; left: 0px; right: 0px;",n="top: 0px; left: 0px; right: 0px;",m="margin-right: 10px; float: left;",g="top: 0px; bottom: 0px; left: 0px;",h="top: 0px; bottom: 0px; right: 0px;",p='content: ""; margin-top: -6.5px;',d='content: ""; margin-top: -6.5px;'):"vertical"==config.thumbnailSlideDirection&&(r="top: 0px; bottom: 0px; right: 0px;",n="left: 0px; top: 0px; bottom: 0px;",m="margin-bottom: 10px;",g="top: 0px; left: 0px; right: 0px;",h="bottom: 0px; left: 0px; right: 0px;",p='content: "";',d='content: "";');var c=".hidden {display: none;}"+o+"#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images {"+i+"}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list {"+l+"list-style: none;margin: 0px;padding: 0px;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list li {"+a+s+"background: #000;z-index: 1;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list li.active {display: block;z-index: 4;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list li.next {display: block;z-index: 3;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list li.prev {display: block;z-index: 2;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list li img {width: 100%;transform: rotate(.0001deg);}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumbnails-outer {"+r+"position: absolute;background: #000;background: rgba(0, 0, 0, .75);z-index: 20;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumbnails {"+n+"position: absolute;overflow: hidden;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumbnail-list {list-style: none;margin: 0px;padding: 10px;position: absolute;top: 0px;left: 0px;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumbnail-list li {width: "+config.thumbnailWidth+"px;height: "+config.thumbnailHeight+"px;"+m+'cursor: pointer;overflow: hidden;opacity: .5;-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";filter: alpha(opacity=50);-khtml-opacity: 0.5;-moz-opacity: 0.5;-webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing: border-box;}#rs-photo-gallery-container-'+elemID+' .rs-photo-gallery-thumbnail-list li.active {opacity: 1;-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter: alpha(opacity=100);-khtml-opacity: 1;-moz-opacity: 1;}#rs-photo-gallery-container-'+elemID+" .rs-photo-gallery-thumbnail-list li.last {margin: 0px;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumbnail-list li img {display: block;width: 100%;height: auto;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumb-control {padding: 7px 10px;cursor: pointer;background: #000;background: rgba(0, 0, 0, .20);-webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing: border-box;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumb-control.back {"+g+"position: absolute;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumb-control.back:before {"+p+"display: block;text-align: center;line-height: 1;color: #FFF;font-size: 13px;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumb-control.next {"+h+"position: absolute;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumb-control.next:before {"+d+"display: block;text-align: center;line-height: 1;color: #FFF;font-size: 13px;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-desc {position: absolute;bottom: 0px;right: 0px;left: 0px;z-index: 20;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-control-text {position: relative;display: block;width: 0px !important;height: 0px !important;overflow: hidden !important;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-control.play-pause {width: 24px;height: 25px;position: absolute;bottom: 20px;left: 20px;z-index: 15;border-radius: 5px;background: #000;background: rgba(0, 0, 0, .80);}#rs-photo-gallery-container-"+elemID+' .rs-photo-gallery-control.play-pause.playing:before {content: "";width: 0px;height: 15px;position: absolute;top: 5px;left: 7.5px;border-left: double 10px #FFF;}#rs-photo-gallery-container-'+elemID+' .rs-photo-gallery-control.play-pause.paused:before {content: "";width: 0px;height: 0px;border-style: solid;border-width: 7.5px 0 7.5px 10px;border-color: transparent transparent transparent #FFF;position: absolute;top: 5px;left: 8.5px;}#rs-photo-gallery-container-'+elemID+" .rs-photo-gallery-control.back {width: 30px;height: 30px;position: absolute;top: 50%;left: 20px;margin-top: -15px;z-index: 20;cursor: pointer;}#rs-photo-gallery-container-"+elemID+' .rs-photo-gallery-control.back:before {content: "<";display: block;text-align: center;line-height: 100%;color: #FFF;font-size: 50px;}#rs-photo-gallery-container-'+elemID+" .rs-photo-gallery-control.next {width: 30px;height: 30px;position: absolute;top: 50%;right: 20px;margin-top: -15px;z-index: 20;cursor: pointer;}#rs-photo-gallery-container-"+elemID+' .rs-photo-gallery-control.next:before {content: ">";display: block;text-align: center;line-height: 100%;color: #FFF;font-size: 50px;}#rs-photo-gallery-container-'+elemID+" .rs-photo-gallery-bullets-outer {position: absolute;top: 0px;left: 0px;text-align: center;z-index: 10;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-bullet {width: 12px;height: 12px;background: #FFF;border: solid 1px #666;display: inline-block;margin: 0px 5px;cursor: pointer;border-radius: 8px;-moz-background-clip: padding;-webkit-background-clip: padding;background-clip: padding-box;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-bullet.active {background: #999;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-bullet-control {width: 15px;height: 15px;display: inline-block;margin: 0px 10px;cursor: pointer;vertical-align: top;}#rs-photo-gallery-container-"+elemID+' .rs-photo-gallery-bullet-control.back:before {content: "<";color: #FFF;font-size: 20px;display: block;line-height: 12px;text-align: center;}#rs-photo-gallery-container-'+elemID+' .rs-photo-gallery-bullet-control.next:before {content: ">";color: #FFF;font-size: 20px;display: block;line-height: 12px;text-align: center;}#rs-photo-gallery-container-'+elemID+" .rs-photo-caption.active, .rs-photo-title.active {position: relative;z-index: 2;}#rs-photo-gallery-container-"+elemID+" .rs-photo-caption.next, .rs-photo-title.next {display: none;position: relative;z-index: 1;}#rs-photo-gallery-container-"+elemID+" .image.loading .loader {display: block;position: absolute;top: 50%;left: 50%;width: 150px;height: 150px;line-height: 150px;color: #ccc;font-size: 14px;margin: -75px 0px 0px -75px;box-sizing: border-box;text-align: center;z-index: 5;text-transform: uppercase;}#rs-photo-gallery-container-"+elemID+' .loader:before, .loader:after {opacity: 0;box-sizing: border-box;content: "\\0020";position: absolute;top: 0;left: 0;width: 100%;height: 100%;border-radius: 100px;border: 5px solid #fff;box-shadow: 0 0 50px #fff, inset 0 0 50px #fff;}#rs-photo-gallery-container-'+elemID+" .loader:after {z-index: 1;-webkit-animation: gogoloader 2s infinite 1s;}#rs-photo-gallery-container-"+elemID+" .loader:before {z-index: 2;-webkit-animation: gogoloader 2s infinite;}@-webkit-keyframes gogoloader {0% {-webkit-transform: scale(0);opacity: 0;}50% {opacity: 1;}100% {-webkit-transform: scale(1);opacity: 0;}}",y=document.createTextNode(c);e.styleSheet?e.styleSheet.cssText=c:e.appendChild(y)}}function sliderDimReset(){var e=getBreakPoint();if("yes"==config.customResize)config.customResizeFunction.call(this,element,config.imageWidth,config.imageHeight);else if("yes"==config.fullScreenRotator&&-1<config.fullScreenBreakpoints.indexOf(e)){var t=$(element).offset().top,l=$(window).width(),a=$(window).height()-t,i=l*$(".rs-photo-gallery-images-list li",element).length,o=l,s=0,r=config.imageWidth,n=config.imageHeight/r;(s=o*n)<a&&(o=(s=a)/n);var m=(o-l)/2,g=(s-a)/2,h=$(".rs-photo-gallery-images-list li.active",element).index()*(l=parseInt(l));$(".rs-photo-gallery-container",element).css({height:a+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images",element).css({height:a+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list",element).css({width:i+"px",height:a+"px",left:"-"+h+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css({width:l+"px",height:a+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li img",element).css({width:o+"px",height:s+"px",margin:"-"+g+"px 0px 0px -"+m+"px"})}else{var p=$(element).width()>config.imageWidth?config.imageWidth:$(element).width(),d=p*(config.imageHeight/config.imageWidth);i=p*$(".rs-photo-gallery-images-list li",element).length,h=$(".rs-photo-gallery-images-list li.active",element).index()*(p=parseInt(p));$(".rs-photo-gallery-container .rs-photo-gallery-images",element).css({height:d+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list",element).css({width:i+"px",height:d+"px",left:"-"+h+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css({width:p+"px",height:d+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li img",element).removeAttr("style")}}function windowResize(){if(1<recordNum&&timerStop(),"yes"==config.customResize)config.customResizeFunction.call(this,element,config.imageWidth,config.imageHeight);else{if("fade"==config.transitionType){var e=getBreakPoint();if("yes"==config.fullScreenRotator&&-1<config.fullScreenBreakpoints.indexOf(e)){var t=$(element).offset().top,l=$(window).width(),a=$(window).height()-t,i=l*(a/l),o=l,s=0,r=config.imageWidth;(s=o*(g=config.imageHeight/r))<a&&(o=(s=a)/g);var n=(o-l)/2,m=(s-a)/2;$(".rs-photo-gallery-container",element).css("height",i+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images",element).css("height",i+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list",element).css("height",i+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("height",i+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li img",element).css({width:o+"px",height:s+"px",margin:"-"+m+"px 0px 0px -"+n+"px"})}else{var g;o=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).width(),r=config.imageWidth,s=o*(g=config.imageHeight/r);$(".rs-photo-gallery-container .rs-photo-gallery-images",element).css("height",s+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list",element).css("height",s+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("height",s+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li img",element).removeAttr("style")}}"slide"==config.transitionType&&sliderDimReset()}if(1<recordNum&&timerReset(),"yes"==config.thumbnails)if("vertical"==config.thumbnailSlideDirection){var h=-1*parseInt($(".rs-photo-gallery-thumbnail-list",element).css("top")),p=$(".rs-photo-gallery-thumbnail-list",element).outerHeight(!0)-$(".rs-photo-gallery-thumbnails",element).outerHeight(!0);if(p<h&&$(".rs-photo-gallery-thumbnail-list",element).css("top","-"+p+"px"),$(".rs-photo-gallery-thumbnails",element).outerHeight(!0)<$(".rs-photo-gallery-thumbnail-list",element).outerHeight(!0)){var d=$(".rs-photo-gallery-thumb-control.back",element).outerHeight(!0)+10,c=$(".rs-photo-gallery-thumb-control.next",element).outerHeight(!0)+10;$(".rs-photo-gallery-thumb-control",element).removeClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({top:d+"px",bottom:c+"px"}),$(".rs-photo-gallery-thumbnail-list",element).css({"padding-top":"0px","padding-bottom":"0px","margin-top":"0px","margin-bottom":"0px"})}else $(".rs-photo-gallery-thumb-control",element).addClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({top:"0px",bottom:"0px"}),$(".rs-photo-gallery-thumbnail-list",element).removeAttr("style")}else if("horizontal"==config.thumbnailSlideDirection){if($(".rs-photo-gallery-thumbnails",element).outerWidth(!0)<$(".rs-photo-gallery-thumbnail-list",element).outerWidth(!0)){var y=$(".rs-photo-gallery-thumb-control.back",element).outerWidth(!0)+10,u=$(".rs-photo-gallery-thumb-control.next",element).outerWidth(!0)+10;$(".rs-photo-gallery-thumb-control",element).removeClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({left:y+"px",right:u+"px"}),$(".rs-photo-gallery-thumbnail-list",element).css({"padding-left":"0px","padding-right":"0px","margin-left":"0px","margin-right":"0px"})}else{var f=0;$(".rs-photo-gallery-thumbnail",element).each(function(){f+=$(this).outerWidth(!0)}),$(".rs-photo-gallery-thumbnail-list",element).removeAttr("style").css("width",f+"px"),$(".rs-photo-gallery-thumb-control",element).addClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({left:"0px",right:"0px"})}}}function getBreakPoint(){return 1024<=$(window).width()?"960":768<=$(window).width()&&$(window).width()<1024?"768":640<=$(window).width()&&$(window).width()<768?"640":480<=$(window).width()&&$(window).width()<640?"480":320<=$(window).width()&&$(window).width()<480?"320":void 0}"yes"==config.appHeader&&$(element).prepend('<div class="ui-widget-header"><h1>'+myJSON.Album.title+"</h1></div>"),0<recordNum&&(buildStyleSheet(),gatherMedia(),"yes"==config.efficientLoad?loadInitImages():loadImages(),loadThumbs(),1<recordNum&&(galleryEvents(),"yes"==config.autoRotate&&galleryTimer()),windowResize()),config.allLoaded.call(this)})}}(jQuery),function(t,l,a){"function"==typeof define&&define.amd?define(["jquery"],function(e){return a(e,t,l),e.mobile}):a(t.jQuery,t,l)}(this,document,function(e,t,a,l){var i,o;(function(p,e,t,d){function c(e){for(;e&&void 0!==e.originalEvent;)e=e.originalEvent;return e}function o(e){for(var t,l,a={};e;){for(l in t=p.data(e,x))t[l]&&(a[l]=a.hasVirtualBinding=!0);e=e.parentNode}return a}function i(){Q=!0}function s(){Q=!1}function r(){n(),N=setTimeout(function(){M=N=0,T.length=0,j=!1,i()},p.vmouse.resetTimerDuration)}function n(){N&&(clearTimeout(N),N=0)}function m(e,t,l){var a;return(l&&l[e]||!l&&function(e,t){for(var l;e;){if((l=p.data(e,x))&&(!t||l[t]))return e;e=e.parentNode}return null}(t.target,e))&&(a=function(e,t){var l,a,i,o,s,r,n,m,g,h=e.type;if((e=p.Event(e)).type=t,l=e.originalEvent,a=p.event.props,-1<h.search(/^(mouse|click)/)&&(a=w),l)for(n=a.length;n;)e[o=a[--n]]=l[o];if(-1<h.search(/mouse(down|up)|click/)&&!e.which&&(e.which=1),-1!==h.search(/^touch/)&&(h=(i=c(l)).touches,s=i.changedTouches,r=h&&h.length?h[0]:s&&s.length?s[0]:d))for(m=0,g=k.length;m<g;m++)e[o=k[m]]=r[o];return e}(t,e),p(t.target).trigger(a)),a}function g(e){var t,l=p.data(e.target,C);!j&&(!M||M!==l)&&((t=m("v"+e.type,e))&&(t.isDefaultPrevented()&&e.preventDefault(),t.isPropagationStopped()&&e.stopPropagation(),t.isImmediatePropagationStopped()&&e.stopImmediatePropagation()))}function h(e){var t,l,a,i=c(e).touches;i&&1===i.length&&((l=o(t=e.target)).hasVirtualBinding&&(M=z++,p.data(t,C,M),n(),s(),D=!1,a=c(e).touches[0],O=a.pageX,J=a.pageY,m("vmouseover",e,l),m("vmousedown",e,l)))}function y(e){Q||(D||m("vmousecancel",e,o(e.target)),D=!0,r())}function u(e){if(!Q){var t=c(e).touches[0],l=D,a=p.vmouse.moveDistanceThreshold,i=o(e.target);(D=D||Math.abs(t.pageX-O)>a||Math.abs(t.pageY-J)>a)&&!l&&m("vmousecancel",e,i),m("vmousemove",e,i),r()}}function f(e){if(!Q){i();var t,l,a=o(e.target);m("vmouseup",e,a),D||(t=m("vclick",e,a))&&t.isDefaultPrevented()&&(l=c(e).changedTouches[0],T.push({touchID:M,x:l.clientX,y:l.clientY}),j=!0),m("vmouseout",e,a),D=!1,r()}}function v(e){var t,l=p.data(e,x);if(l)for(t in l)if(l[t])return!0;return!1}function b(){}function l(l){var a=l.substr(1);return{setup:function(){v(this)||p.data(this,x,{}),p.data(this,x)[l]=!0,A[l]=(A[l]||0)+1,1===A[l]&&R.bind(a,g),p(this).bind(a,b),L&&(A.touchstart=(A.touchstart||0)+1,1===A.touchstart&&R.bind("touchstart",h).bind("touchend",f).bind("touchmove",u).bind("scroll",y))},teardown:function(){--A[l],A[l]||R.unbind(a,g),L&&(--A.touchstart,A.touchstart||R.unbind("touchstart",h).unbind("touchmove",u).unbind("touchend",f).unbind("scroll",y));var e=p(this),t=p.data(this,x);t&&(t[l]=!1),e.unbind(a,b),v(this)||e.removeData(x)}}}var $,a,x="virtualMouseBindings",C="virtualTouchID",I="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),k="clientX clientY pageX pageY screenX screenY".split(" "),S=p.event.mouseHooks?p.event.mouseHooks.props:[],w=p.event.props.concat(S),A={},N=0,O=0,J=0,D=!1,T=[],j=!1,Q=!1,L="addEventListener"in t,R=p(t),z=1,M=0;for(p.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},a=0;a<I.length;a++)p.event.special[I[a]]=l(I[a]);L&&t.addEventListener("click",function(e){var t,l,a,i,o,s=T.length,r=e.target;if(s)for(t=e.clientX,l=e.clientY,$=p.vmouse.clickDistanceThreshold,a=r;a;){for(i=0;i<s;i++)if(o=T[i],0,a===r&&Math.abs(o.x-t)<$&&Math.abs(o.y-l)<$||p.data(a,C)===o.touchID)return e.preventDefault(),void e.stopPropagation();a=a.parentNode}},!0)})(e,0,a),e.mobile={},o={touch:"ontouchend"in a},(i=e).mobile.support=i.mobile.support||{},i.extend(i.support,o),i.extend(i.mobile.support,o),function(m,o,s){function g(e,t,l,a){var i=l.type;l.type=t,a?m.event.trigger(l,s,e):m.event.dispatch.call(e,l),l.type=i}var h=m(a),e=m.mobile.support.touch,r="touchmove scroll",l=e?"touchstart":"mousedown",n=e?"touchend":"mouseup",p=e?"touchmove":"mousemove";m.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(e,t){m.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)},m.attrFn&&(m.attrFn[t]=!0)}),m.event.special.scrollstart={enabled:!0,setup:function(){function t(e,t){g(i,(l=t)?"scrollstart":"scrollstop",e)}var l,a,i=this;m(i).bind(r,function(e){m.event.special.scrollstart.enabled&&(l||t(e,!0),clearTimeout(a),a=setTimeout(function(){t(e,!1)},50))})},teardown:function(){m(this).unbind(r)}},m.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var s=this,r=m(s),n=!1;r.bind("vmousedown",function(e){function t(){clearTimeout(i)}function l(){t(),r.unbind("vclick",a).unbind("vmouseup",t),h.unbind("vmousecancel",l)}function a(e){l(),n||o!==e.target?n&&e.preventDefault():g(s,"tap",e)}if(n=!1,e.which&&1!==e.which)return!1;var i,o=e.target;r.bind("vmouseup",t).bind("vclick",a),h.bind("vmousecancel",l),i=setTimeout(function(){m.event.special.tap.emitTapOnTaphold||(n=!0),g(s,"taphold",m.Event("taphold",{target:o}))},m.event.special.tap.tapholdThreshold)})},teardown:function(){m(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),h.unbind("vmousecancel")}},m.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(e){var t=o.pageXOffset,l=o.pageYOffset,a=e.clientX,i=e.clientY;return 0===e.pageY&&Math.floor(i)>Math.floor(e.pageY)||0===e.pageX&&Math.floor(a)>Math.floor(e.pageX)?(a-=t,i-=l):(i<e.pageY-l||a<e.pageX-t)&&(a=e.pageX-t,i=e.pageY-l),{x:a,y:i}},start:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e,l=m.event.special.swipe.getLocation(t);return{time:(new Date).getTime(),coords:[l.x,l.y],origin:m(e.target)}},stop:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e,l=m.event.special.swipe.getLocation(t);return{time:(new Date).getTime(),coords:[l.x,l.y]}},handleSwipe:function(e,t,l,a){if(t.time-e.time<m.event.special.swipe.durationThreshold&&Math.abs(e.coords[0]-t.coords[0])>m.event.special.swipe.horizontalDistanceThreshold&&Math.abs(e.coords[1]-t.coords[1])<m.event.special.swipe.verticalDistanceThreshold){var i=e.coords[0]>t.coords[0]?"swipeleft":"swiperight";return g(l,"swipe",m.Event("swipe",{target:a,swipestart:e,swipestop:t}),!0),g(l,i,m.Event(i,{target:a,swipestart:e,swipestop:t}),!0),!0}return!1},eventInProgress:!1,setup:function(){var e,o=this,t=m(o),s={};(e=m.data(this,"mobile-events"))||(e={length:0},m.data(this,"mobile-events",e)),e.length++,(e.swipe=s).start=function(e){if(!m.event.special.swipe.eventInProgress){m.event.special.swipe.eventInProgress=!0;var t,l=m.event.special.swipe.start(e),a=e.target,i=!1;s.move=function(e){l&&!e.isDefaultPrevented()&&(t=m.event.special.swipe.stop(e),i||(i=m.event.special.swipe.handleSwipe(l,t,o,a))&&(m.event.special.swipe.eventInProgress=!1),Math.abs(l.coords[0]-t.coords[0])>m.event.special.swipe.scrollSupressionThreshold&&e.preventDefault())},s.stop=function(){i=!0,m.event.special.swipe.eventInProgress=!1,h.off(p,s.move),s.move=null},h.on(p,s.move).one(n,s.stop)}},t.on(l,s.start)},teardown:function(){var e,t;(e=m.data(this,"mobile-events"))&&(t=e.swipe,delete e.swipe,e.length--,0===e.length&&m.removeData(this,"mobile-events")),t&&(t.start&&m(this).off(l,t.start),t.move&&h.off(p,t.move),t.stop&&h.off(n,t.stop))}},m.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(e,t){m.event.special[e]={setup:function(){m(this).bind(t,m.noop)},teardown:function(){m(this).unbind(t)}}})}(e,this)});